<UserControl x:Class="Agt.Desktop.Views.FormEditorView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="320"/>
        </Grid.ColumnDefinitions>

        <!-- Paleta bloků -->
        <StackPanel Grid.Column="0" Background="#181818">
            <TextBlock Text="Paleta bloků" Margin="8" FontWeight="Bold"/>
            <ListBox ItemsSource="{Binding BlockPalette}" SelectedItem="{Binding SelectedPaletteItem}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Vertical" Margin="6">
                            <TextBlock Text="{Binding Name}" />
                            <TextBlock Text="{Binding Key}" Opacity="0.6" FontSize="11"/>
                            <TextBlock Text="{Binding Version}" Opacity="0.6" FontSize="11"/>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
            <Button Content="Přidat do formuláře" Margin="8"
                    Command="{Binding AddSelectedBlockCommand}" />
        </StackPanel>

        <!-- Sestava formuláře -->
        <DockPanel Grid.Column="1" Margin="8">
            <TextBlock DockPanel.Dock="Top" Text="Sestava" FontWeight="Bold"/>
            <ListBox ItemsSource="{Binding FormBlocks}" SelectedItem="{Binding SelectedFormBlock}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Margin="4">
                            <TextBlock Text="{Binding Title}" />
                            <TextBlock Text="  (" />
                            <TextBlock Text="{Binding Key}" Opacity="0.6"/>
                            <TextBlock Text=" v" />
                            <TextBlock Text="{Binding Version}" Opacity="0.6"/>
                            <TextBlock Text=")" />
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </DockPanel>

        <!-- Vlastnosti / Uložit -->
        <StackPanel Grid.Column="2" Margin="8">
            <TextBlock Text="Vlastnosti bloku" FontWeight="Bold"/>
            <TextBlock Text="Titulek" Margin="0,8,0,2"/>
            <TextBox Text="{Binding SelectedFormBlock.Title, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
            <StackPanel Orientation="Horizontal" Margin="0,12,0,0">
                <Button Content="Nahoru" Command="{Binding MoveUpCommand}" Margin="0,0,8,0"/>
                <Button Content="Dolů" Command="{Binding MoveDownCommand}"/>
            </StackPanel>

            <Separator Margin="0,16,0,16"/>
            <Button Content="Uložit (Draft)" Command="{Binding SaveDraftCommand}" Height="40"/>
        </StackPanel>
    </Grid>
</UserControl>
