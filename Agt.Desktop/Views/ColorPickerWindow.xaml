<Window x:Class="Agt.Desktop.Views.ColorPickerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Výběr barvy" SizeToContent="WidthAndHeight"
        WindowStartupLocation="CenterOwner" ResizeMode="NoResize"
        MinWidth="420">
    <Border Padding="12">
        <StackPanel Orientation="Vertical">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="280"/>
                    <ColumnDefinition Width="12"/>
                    <ColumnDefinition Width="28"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- SV plátno (Saturation/Value) -->
                <Grid Grid.Column="0">
                    <Grid x:Name="SvCanvas"
                Width="280" Height="200"
                Background="Transparent"
                MouseLeftButtonDown="SvCanvas_MouseLeftButtonDown"
                MouseMove="SvCanvas_MouseMove"
                MouseLeftButtonUp="SvCanvas_MouseLeftButtonUp"
                SizeChanged="SvCanvas_SizeChanged">

                        <!-- S (bílá -> barva podle Hue) -->
                        <Rectangle>
                            <Rectangle.Fill>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                    <GradientStop Color="#FFFFFFFF" Offset="0"/>
                                    <GradientStop x:Name="SvHueColorStop" Color="#FFFF0000" Offset="1"/>
                                </LinearGradientBrush>
                            </Rectangle.Fill>
                        </Rectangle>

                        <!-- V (transparent -> černá) -->
                        <Rectangle>
                            <Rectangle.Fill>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                    <GradientStop Color="#00FFFFFF" Offset="0"/>
                                    <GradientStop Color="#FF000000" Offset="1"/>
                                </LinearGradientBrush>
                            </Rectangle.Fill>
                        </Rectangle>

                        <!-- Marker (kurzor) – pozicovaný přes RenderTransform -->
                        <Ellipse x:Name="SvMarker"
                     Width="12" Height="12"
                     Stroke="White" StrokeThickness="2"
                     Fill="Transparent"
                     HorizontalAlignment="Left"
                     VerticalAlignment="Top"
                     IsHitTestVisible="False"/>
                    </Grid>
                </Grid>

                <!-- mezera -->
                <Grid Grid.Column="1"/>

                <!-- Hue slider -->
                <Grid Grid.Column="2">
                    <Rectangle Width="12" Height="200" Stroke="#66000000" StrokeThickness="1" Margin="0,0,8,0">
                        <Rectangle.Fill>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                <GradientStop Color="#FFFF0000" Offset="0.000"/>
                                <GradientStop Color="#FFFFFF00" Offset="0.167"/>
                                <GradientStop Color="#FF00FF00" Offset="0.333"/>
                                <GradientStop Color="#FF00FFFF" Offset="0.500"/>
                                <GradientStop Color="#FF0000FF" Offset="0.667"/>
                                <GradientStop Color="#FFFF00FF" Offset="0.833"/>
                                <GradientStop Color="#FFFF0000" Offset="1.000"/>
                            </LinearGradientBrush>
                        </Rectangle.Fill>
                    </Rectangle>

                    <Slider x:Name="HueSlider"
                  Orientation="Vertical"
                  Minimum="0" Maximum="360"
                  Height="200"
                  ValueChanged="HueSlider_ValueChanged"/>
                </Grid>

                <!-- náhled & ovladače -->
                <StackPanel Grid.Column="3" Margin="12,0,0,0" VerticalAlignment="Top">
                    <TextBlock Text="Náhled" FontWeight="SemiBold"/>
                    <Border x:Name="PreviewSwatch" Width="80" Height="40" BorderBrush="#66000000" BorderThickness="1" Margin="0,4,0,12"/>

                    <TextBlock Text="HEX" FontWeight="SemiBold"/>
                    <DockPanel>
                        <TextBox x:Name="HexBox" Width="110" Margin="0,4,8,12"
                     TextChanged="HexBox_TextChanged" />
                        <Button Content="Normalizovat" Click="NormalizeHex_Click" Margin="0,4,0,12"/>
                    </DockPanel>

                    <TextBlock Text="Rychlá paleta" FontWeight="SemiBold" Margin="0,0,0,4"/>
                    <UniformGrid Columns="6" Margin="0,0,0,12">
                        <Button Background="#000000" Height="18" Margin="1" Click="Palette_Click"/>
                        <Button Background="#FFFFFF" Height="18" Margin="1" Click="Palette_Click"/>
                        <Button Background="#333333" Height="18" Margin="1" Click="Palette_Click"/>
                        <Button Background="#777777" Height="18" Margin="1" Click="Palette_Click"/>
                        <Button Background="#AA0000" Height="18" Margin="1" Click="Palette_Click"/>
                        <Button Background="#00AA00" Height="18" Margin="1" Click="Palette_Click"/>
                        <Button Background="#0000AA" Height="18" Margin="1" Click="Palette_Click"/>
                        <Button Background="#FFA500" Height="18" Margin="1" Click="Palette_Click"/>
                        <Button Background="#FFD700" Height="18" Margin="1" Click="Palette_Click"/>
                        <Button Background="#00CED1" Height="18" Margin="1" Click="Palette_Click"/>
                        <Button Background="#8A2BE2" Height="18" Margin="1" Click="Palette_Click"/>
                        <Button Background="#FF69B4" Height="18" Margin="1" Click="Palette_Click"/>
                    </UniformGrid>
                </StackPanel>
            </Grid>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="Zrušit" Width="90" Margin="0,8,6,0" Click="Cancel_Click"/>
                <Button Content="OK" Width="90" Margin="0,8,0,0" Click="Ok_Click"/>
            </StackPanel>
        </StackPanel>
    </Border>
</Window>
