<UserControl x:Class="Agt.Desktop.Views.PropertiesPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:m="clr-namespace:Agt.Desktop.Models">
    <Grid Margin="10">
        <!-- Nikdo nevybrán -->
        <StackPanel Visibility="{Binding Source={StaticResource SelectionService}, Path=Count,
                                      Converter={StaticResource CountToVisibility}, ConverterParameter=Invert:1}">
            <TextBlock Text="Nic není vybráno" FontWeight="SemiBold" Margin="0,0,0,8"/>
            <TextBlock Text="Tip: Ctrl-klik přidá/odebere položku výběru."/>
        </StackPanel>

        <!-- Jedna položka -->
        <ContentControl Visibility="{Binding Source={StaticResource SelectionService}, Path=Count,
                                        Converter={StaticResource CountToVisibility}, ConverterParameter=1}">
            <ContentControl.Content>
                <Binding Source="{StaticResource SelectionService}" Path="SelectedItems[0]"/>
            </ContentControl.Content>

            <ContentControl.Resources>
                <!-- Základ -->
                <DataTemplate DataType="{x:Type m:FieldComponentBase}">
                    <StackPanel>
                        <TextBlock Text="Základní" FontWeight="SemiBold" Margin="0,0,0,8"/>
                        <UniformGrid Columns="2" Margin="0,0,0,8">
                            <TextBlock Text="FieldKey"/>
                            <TextBox Text="{Binding FieldKey, UpdateSourceTrigger=PropertyChanged}"/>
                            <TextBlock Text="Label"/>
                            <TextBox Text="{Binding Label, UpdateSourceTrigger=PropertyChanged}"/>
                            <TextBlock Text="Placeholder"/>
                            <TextBox Text="{Binding Placeholder, UpdateSourceTrigger=PropertyChanged}"/>
                            <TextBlock Text="Required"/>
                            <CheckBox IsChecked="{Binding Required, UpdateSourceTrigger=PropertyChanged}"/>
                            <TextBlock Text="Default"/>
                            <TextBox Text="{Binding DefaultValue, UpdateSourceTrigger=PropertyChanged}"/>
                            <TextBlock Text="Šířka"/>
                            <TextBox Text="{Binding Width, UpdateSourceTrigger=PropertyChanged}"/>
                            <TextBlock Text="Výška"/>
                            <TextBox Text="{Binding Height, UpdateSourceTrigger=PropertyChanged}"/>
                            <TextBlock Text="Z-index"/>
                            <TextBox Text="{Binding ZIndex, UpdateSourceTrigger=PropertyChanged}"/>
                            <TextBlock Text="X"/>
                            <TextBox Text="{Binding X, UpdateSourceTrigger=PropertyChanged}"/>
                            <TextBlock Text="Y"/>
                            <TextBox Text="{Binding Y, UpdateSourceTrigger=PropertyChanged}"/>
                        </UniformGrid>
                    </StackPanel>
                </DataTemplate>

                <!-- Specializace podle typu (Label/TextBox/...) – stejné jako dřív, lze rozšířit -->
            </ContentControl.Resources>
        </ContentControl>

        <!-- Více vybraných -->
        <StackPanel Visibility="{Binding Source={StaticResource SelectionService}, Path=Count,
                                      Converter={StaticResource CountToVisibility}, ConverterParameter=2}">
            <TextBlock Text="{Binding Source={StaticResource SelectionService}, Path=Count, StringFormat={}{0} vybraných}" FontWeight="SemiBold" Margin="0,0,0,8"/>
            <TextBlock Text="Použij horní ‚floating‘ nabídku nebo kontextové menu pro hromadné akce."/>
        </StackPanel>
    </Grid>
</UserControl>
