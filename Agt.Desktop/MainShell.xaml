<Window x:Class="Agt.Desktop.Views.MainShell"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="AGT" Height="700" Width="1000"
        WindowStartupLocation="CenterScreen">
    <DockPanel>

        <!-- Hlavní menu -->
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_Soubor">
                <MenuItem Header="_Nový case" Command="{Binding NewCaseCommand}" />
                <MenuItem Header="_Editor"    Command="{Binding OpenEditorCommand}" />
                <Separator />
                <MenuItem Header="_Konec"     Command="{Binding ExitCommand}" />
            </MenuItem>
        </Menu>

        <!-- Tělo okna -->
        <Grid Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Toolbar / akce nad seznamem  -->
            <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,8">
                <Button Content="Nový case"    Margin="0,0,8,0" Command="{Binding NewCaseCommand}"/>
                <Button Content="Spustit case" Margin="0,0,8,0" Command="{Binding OpenCaseCommand}"/>
                <Button Content="Obnovit"                   Command="{Binding RefreshCommand}"/>
                <!-- ZÁMĚRNĚ už bez tlačítka 'Editor' – ten je pouze v menu -->
            </StackPanel>

            <!-- Seznam případů -->
            <DataGrid x:Name="CasesList"
                      Grid.Row="1"
                      AutoGenerateColumns="False"
                      ItemsSource="{Binding Cases}"
                      IsReadOnly="True"
                      SelectionMode="Single"
                      MouseDoubleClick="CasesList_MouseDoubleClick">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Formulář"         Binding="{Binding FormName}" Width="2*"/>
                    <DataGridTextColumn Header="Založeno"         Binding="{Binding CreatedAt, StringFormat={}{0:dd.MM.yyyy HH:mm}}" Width="*"/>
                    <DataGridTextColumn Header="Založil"          Binding="{Binding CreatedBy}" Width="*"/>
                    <DataGridTextColumn Header="Krok"             Binding="{Binding StageProgress}" Width="*"/>
                    <DataGridTextColumn Header="Přiřazeno"        Binding="{Binding Assignees}" Width="*"/>
                    <DataGridTextColumn Header="Termín"           Binding="{Binding DueAt, StringFormat={}{0:dd.MM.yyyy}}" Width="*"/>
                    <DataGridTextColumn Header="Aktuální stage"   Binding="{Binding CurrentStage}" Width="*"/>
                </DataGrid.Columns>
            </DataGrid>
        </Grid>
    </DockPanel>
</Window>
